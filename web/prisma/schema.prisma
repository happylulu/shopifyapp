generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Session {
  id               String            @id @default(uuid())
  accessToken      String?
  expires          DateTime?
  isOnline         Boolean
  scope            String?
  shop             String
  state            String
  apiKey           String
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  onlineAccessInfo OnlineAccessInfo?
}

model OnlineAccessInfo {
  id                  String          @id @default(uuid())
  sessionId           String?         @unique
  expiresIn           Int
  associatedUserScope String
  createdAt           DateTime        @default(now())
  updatedAt           DateTime        @updatedAt
  associatedUser      AssociatedUser?
  session             Session?        @relation(fields: [sessionId], references: [id])
}

model AssociatedUser {
  id                 String            @id @default(uuid())
  onlineAccessInfoId String?           @unique
  createdAt          DateTime          @default(now())
  updatedAt          DateTime          @updatedAt
  userId             BigInt
  firstName          String
  lastName           String
  email              String
  accountOwner       Boolean
  locale             String
  collaborator       Boolean
  emailVerified      Boolean
  onlineAccessInfo   OnlineAccessInfo? @relation(fields: [onlineAccessInfoId], references: [id])
}
